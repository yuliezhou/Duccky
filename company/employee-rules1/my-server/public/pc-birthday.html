<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>团建抽奖</title>
	<link rel="stylesheet" href="css/publicSty.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/liMarquee.css">
	<link rel="shortcut icon" href="images/favic.png" type="image/x-icon">
</head>
<body>
	<div class="pc_bodyer auto_bodyer" id="bodyer">
		<div class="logo pb100">
			<img src="images/logo.png" alt="">
		</div>
		<div class="content">
			<div class="content_inner flex_mid content_auto" :class='closeBool?"blur":""'>
				<img src="images/birthday.png" alt="" class="birthday_img">
			</div>	
			<div class="modal flex_mid" v-if='closeBool'>
				<div class="number_box number_small" v-for='item in qusArr'>
					<span v-text='item'></span>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
<script type="text/javascript" src="js/vue.min.js"></script>
<script src="js/axios.min.js"></script>
<script type="text/javascript" src="js/layer.js"></script>
<script type="text/javascript" src="js/api.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="js/jquery.liMarquee.js"></script>
<script type="text/javascript">
	new Vue({
	    el: '#bodyer',
	    data: {
	        nameIpt: '',
	        cardNum: '',
	        randomTxt:'',
	        firstNum:1,
	        modalBool:false,//模态层显示
	        qusArr:[],
	        closeBool:false
	    },
	    mounted() {
	    	this.forBirthdayPeople()
	    },
		created:function(){
			var _this = this;
			document.onkeydown=function(e){
				var key=window.event.keyCode;
				if(key==32){
					if(_this.closeBool == false){
						_this.closeBool = true;
					}else{
			    		Api.forBirthdayPeople().then(res=>{
			    			if(res.data.code == 1){
			    				let qusArr = res.data.data.luck;
			    				_this.qusArr = qusArr;
			    			}else{
			    				_this.qusArr = ['结束'];
			    			}
			    		})						
						_this.closeBool = false;			
					}
				}
			}
		},	    
	    updated(){
    	
	    },
	    methods: {
	    	forBirthdayPeople(){
	    		Api.forBirthdayPeople().then(res=>{
	    			if(res.data.code == 1){
	    				let qusArr = res.data.data.luck;
	    				this.qusArr = qusArr;
	    			}else{
		    				this.qusArr = ['结束'];
		    			}
	    		})
	    	},
			randomFrom(low,up){
			 	return Math.floor(Math.random() * (up - low) + low);
			},
			stopScroll(){
				this.modalBool = true;
				let num = this.randomFrom(0,this.qusArr.length);
				this.randomTxt = this.qusArr[num]['title'];
			},
			closeModal(){
				this.modalBool = false;
				this.randomTxt = '';
			}			
	    }
	})	
</script>

